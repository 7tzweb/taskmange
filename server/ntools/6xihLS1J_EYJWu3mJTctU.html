<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>פתיחת קישורים רק עם Ctrl/Command</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; line-height: 1.6; margin: 2rem; }
    .hint { color: #555; margin-bottom: 1rem; }
    a { color: #0b5cab; }
    .toast {
      position: fixed; inset-inline-start: 50%; bottom: 24px; transform: translateX(-50%);
      background: #111; color: #fff; padding: .6rem 1rem; border-radius: 10px;
      font-size: .95rem; opacity: 0; pointer-events: none; transition: opacity .2s ease;
      box-shadow: 0 6px 24px rgba(0,0,0,.18);
    }
    .toast.show { opacity: .95; }
  </style>
</head>
<body>
  <h1>קישורים נפתחים רק עם Ctrl/⌘ + קליק</h1>
  <p class="hint">ב-Windows/Linux: החזק <strong>Ctrl</strong>. במק: החזק <strong>⌘ Command</strong>.</p>

  <ul>
    <li><a href="https://example.com">Example</a></li>
    <li><a href="https://developer.mozilla.org/">MDN</a></li>
    <li><a href="https://www.wikipedia.org/">ויקיפדיה</a></li>
    <li><a href="#section">קישור פנימי (עוגן) — נשאר פעיל רגיל</a></li>
  </ul>

  <h2 id="section">סעיף פנימי</h2>
  <p>זהו עוגן פנימי בדף כדי להדגים שקישורים שמתחילים ב-# לא נחסמים.</p>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    const toastEl = document.getElementById('toast');
    let toastTimer;
    function showToast(msg) {
      toastEl.textContent = msg;
      toastEl.classList.add('show');
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => toastEl.classList.remove('show'), 1400);
    }

    // פותח קישור רק אם לחוץ Ctrl (Windows/Linux) או Meta/Command (macOS)
    function modifierPressed(e) {
      return e.ctrlKey || e.metaKey;
    }

    document.addEventListener('click', function (event) {
      const a = event.target.closest('a[href]');
      if (!a) return;

      const href = a.getAttribute('href') || '';
      if (href.trim().startsWith('#')) return; // לא חוסמים עוגנים פנימיים

      if (!modifierPressed(event)) {
        event.preventDefault();
        showToast('כדי לפתוח קישור: Ctrl/⌘ + קליק');
      }
      // אם יש מקש מתאים – נותנים לדפדפן לפתוח כרגיל
    }, true);

    // גם קליק אמצעי: נחסום אם אין המקש המתאים
    document.addEventListener('auxclick', function (event) {
      if (event.button !== 1) return; // גלגלת
      const a = event.target.closest('a[href]');
      if (!a) return;
      const href = a.getAttribute('href') || '';
      if (href.trim().startsWith('#')) return;

      if (!modifierPressed(event)) {
        event.preventDefault();
        showToast('כדי לפתוח קישור: Ctrl/⌘ + קליק');
      }
    }, true);
  </script>
</body>
</html>
